<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
  	<meta charset="utf-8">
  	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  	<title>Creating and using a container | Rezolver IOC Framework (prerelease) </title>
  	<meta name="viewport" content="width=device-width">
  	<meta name="title" content="Creating and using a container | Rezolver IOC Framework (prerelease) ">
  	<meta name="generator" content="docfx 2.16.2.2">
  	<meta name="description" content="Rezolver is the portable open-source IOC container framework for .Net - built from the ground up for .Net Core, Asp.Net Core, and also optimised for the 'full .Net' :)">
  	<link rel="shortcut icon" href="../favicon.ico">
  	<link rel="stylesheet" href="../styles/docfx.vendor.css">
  	<link rel="stylesheet" href="../styles/docfx.css">
  	<link rel="stylesheet" href="../styles/main.css">
  	<meta property="docfx:navrel" content="../toc.html">
  	<meta property="docfx:tocrel" content="toc.html">
  	<meta property="docfx:rel" content="../">
  	
  		<link rel="apple-touch-icon" sizes="57x57" href="../../apple-touch-icon-57x57.png">
  		<link rel="apple-touch-icon" sizes="60x60" href="../../apple-touch-icon-60x60.png">
  		<link rel="apple-touch-icon" sizes="72x72" href="../../apple-touch-icon-72x72.png">
  		<link rel="apple-touch-icon" sizes="76x76" href="../../apple-touch-icon-76x76.png">
  		<link rel="apple-touch-icon" sizes="114x114" href="../../apple-touch-icon-114x114.png">
  		<link rel="apple-touch-icon" sizes="120x120" href="../../apple-touch-icon-120x120.png">
  		<link rel="apple-touch-icon" sizes="144x144" href="../../apple-touch-icon-144x144.png">
  		<link rel="apple-touch-icon" sizes="152x152" href="../../apple-touch-icon-152x152.png">
  		<link rel="apple-touch-icon" sizes="180x180" href="../../apple-touch-icon-180x180.png">
  		<link rel="icon" type="image/png" href="../../favicon-32x32.png" sizes="32x32">
  		<link rel="icon" type="image/png" href="../../android-chrome-192x192.png" sizes="192x192">
  		<link rel="icon" type="image/png" href="../../favicon-96x96.png" sizes="96x96">
  		<link rel="icon" type="image/png" href="../../favicon-16x16.png" sizes="16x16">
  		<link rel="manifest" href="../../manifest.json">
  		<link rel="mask-icon" href="../../safari-pinned-tab.svg" color="#5bbad5">
  		<meta name="msapplication-TileColor" content="#da532c">
  		<meta name="msapplication-TileImage" content="../../mstile-144x144.png">
  		<meta name="theme-color" content="#ffffff">
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../../content/rz_square_white_on_orange_48x48.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
        		<p class="navbar-text navbar-right github-link"><a href="http://github.com/ZolutionSoftware/Rezolver" target="_blank" title="See this project on Github"><span class="fa fa-github"></span></a></p>
        		<form class="navbar-form navbar-right" role="search" id="search">
        		<div class="form-group">
        			<input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
        		</div>
        		</form>
        		<p class="navbar-text navbar-right">
        			<a href="https://www.nuget.org/packages/Rezolver" target="_blank"><img src="//img.shields.io/nuget/vpre/Rezolver.svg?style=plastic&amp;maxage=480" title="Get the Nuget Package"></a>
        			<a href="http://waffle.io/ZolutionSoftware/Rezolver" title="Open the Waffleboard for this project" target="_blank"><img alt="Work in Progress" src="https://badge.waffle.io/ZolutionSoftware/Rezolver.png?label=in%20progress&title=In%20Progress"></a>
        			<!-- <a href="http://waffle.io/ZolutionSoftware/Rezolver" title="Open the Waffleboard for this project" target="_blank"><img alt="Work prepared" src="https://badge.waffle.io/ZolutionSoftware/Rezolver.png?label=ready&title=Ready"></img></a> -->
        		</p>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items"></div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
              <h1 id="creating-and-using-a-container">Creating and using a container</h1>
              
<p>Using Rezolver is the same as with all other IOC containers:</p>
<ul>
<li>Create and configure the root container</li>
<li>Register the services which your application needs</li>
<li>Resolve services from the container</li>
</ul>
<p>All of this setup is ultimately conducted through just a few primary types, which we&#39;ll take a brief look at
now.</p>
<h1 id="core-types">Core types</h1>
<p>For all the built-in container types, Rezolver splits registration and resolving responsibilities between 
two primary interfaces:</p>
<h2 id="rezolveritargetcontainer"><a class="xref" href="../api/Rezolver.ITargetContainer.html">ITargetContainer</a></h2>
<p>This interface describes a registry of <a class="xref" href="../api/Rezolver.ITarget.html">ITarget</a> objects, keyed by type, describing the type of object 
that is to be created (and how) when a given type is requested.</p>
<p>It is through this interface that you setup your container with registrations, which are then later used when 
resolving objects.</p>
<div class="TIP"><h5>Tip</h5><p>The primary implementation of this interface that you will use in your application is <a class="xref" href="../api/Rezolver.TargetContainer.html">TargetContainer</a>.</p>
</div>
<h2 id="rezolvericontainer"><a class="xref" href="../api/Rezolver.IContainer.html">IContainer</a></h2>
<p>This is the interface through which we resolve objects.  The interface does not expose any registration 
mechanisms at all (even if the &#39;standard&#39; implementations of those classes all do) - only the ability
to request objects from the container.</p>
<p>This interface does not mandate that a container has an <code>ITargetContainer</code>, it&#39;s simply the case
that all the provided implementations which we will discuss in the rest of this documentation do
use that interface as the source of their service registrations.</p>
<div class="TIP"><h5>Tip</h5><p>The primary implementation of this interface is <a class="xref" href="../api/Rezolver.ContainerBase.html">ContainerBase</a>, an abstract class which also 
implements the <a class="xref" href="../api/Rezolver.ITargetContainer.html">ITargetContainer</a> interface by wrapping around the <a class="xref" href="../api/Rezolver.ContainerBase.html#Rezolver_ContainerBase_Targets">Targets</a> 
property that it exposes.</p>
<p>As a consumer of Rezolver, however, you will be using the <a class="xref" href="../api/Rezolver.Container.html">Container</a> and <a class="xref" href="../api/Rezolver.ScopedContainer.html">ScopedContainer</a> 
classes most of the time - which derive most of their functionality from this abstract class.</p>
</div>
<h1 id="creating-a-container">Creating a container</h1>
<p>There are numerous ways to create an <a class="xref" href="../api/Rezolver.IContainer.html">IContainer</a> instance.  The easiest, from the point of view of registering
services and then resolving them, is to create an instance of the <a class="xref" href="../api/Rezolver.Container.html">Container</a> type.  Or, if you want your root
container to act as a global lifetime scope for <a href="lifetimes/scoped.html">explicitly scoped objects</a> then you
can also use <a class="xref" href="../api/Rezolver.ScopedContainer.html">ScopedContainer</a>:</p>
<pre><code class="lang-cs">void Foo()
{
    //create a standard non-scoping container
    var container = new Container();
    //or create a scoped container:
    var container = new ScopedContainer();
</code></pre><p><em>All code samples assume you have added a <code>using</code> statement (<code>imports</code> in VB) for the <code>Rezolver</code> namespace.</em></p>
<p>Once you have a local reference to either of these classes, you can start registering services in the container,
and resolving objects from it.</p>
<h2 id="registering-services">Registering services</h2>
<p>As mentioned above, with our default implementations of <a class="xref" href="../api/Rezolver.IContainer.html">IContainer</a>, registration of services ultimately 
means adding targets to a container&#39;s <a class="xref" href="../api/Rezolver.ContainerBase.html#Rezolver_ContainerBase_Targets">Targets</a> target container, associating them with service 
types which we will later resolve.</p>
<p>The core registration method for this is the <a class="xref" href="../api/Rezolver.ITargetContainer.html#Rezolver_ITargetContainer_Register_">Register</a>
method, which accepts an <a class="xref" href="../api/Rezolver.ITarget.html">ITarget</a> and an optional type against which the registration is to be made.</p>
<p>There&#39;s too much to cover in a few sub headings here for this - 
<a href="service-registration.html">the service registration topic</a> has more detail, and links to the different types of
registration you can perform.</p>
<h2 id="resolving-services">Resolving services</h2>
<p>Resolving objects from your container is done through the <a class="xref" href="../api/Rezolver.IContainer.html#Rezolver_IContainer_Resolve_">Resolve</a> method which, you&#39;ll
notice, accepts an <a class="xref" href="../api/Rezolver.IResolveContext.html">IResolveContext</a> as its single parameter, and returns an <code>Object</code>.  Again, if 
you&#39;re familiar with IOC containers then you&#39;re probably wondering where your strongly-typed <code>Resolve&lt;TService&gt;()</code> 
method is!</p>
<p>Well, fear not.  As with the many extension methods available on <a class="xref" href="../api/Rezolver.ITargetContainer.html">ITargetContainer</a>, the <a class="xref" href="../api/Rezolver.IContainer.html">IContainer</a>
interface (through which all resolving of objects is done) has extension methods to provide a more traditional
IOC API, and these are found on the <a class="xref" href="../api/Rezolver.ContainerResolveExtensions.html">ContainerResolveExtensions</a> static class.</p>
<p>The one you&#39;ll use most frequently, of course, is the <a class="xref" href="../api/Rezolver.ContainerResolveExtensions.html#Rezolver_ContainerResolveExtensions_Resolve__1_Rezolver_IContainer_">Resolve&lt;TObject&gt;(IContainer)</a>
method, which provides the aforementioned <code>Resolve&lt;TService&gt;()</code> API.</p>
<p>So, assuming we have the <code>container</code> that we&#39;ve been using up till now, we would resolve an instance of <code>MyService</code>
simply by doing one of the following:</p>
<pre><code class="lang-cs">MyService service = container.Resolve&lt;MyService&gt;();
//or
MyServiceBase service = container.Resolve&lt;MyServiceBase&gt;();
//or
IMyService service = container.Resolve&lt;IMyService&gt;();
</code></pre><div class="NOTE"><h5>Note</h5><p>The <a class="xref" href="../api/Rezolver.IResolveContext.html">IResolveContext</a> interface captures the context of a call to the <code>Resolve</code> method, tracking the
container on which the call is originally made, whether there is an <a class="xref" href="../api/Rezolver.IContainerScope.html">IContainerScope</a> active for the call,
and other things besides.  You will rarely use it directly in application code unless you are extending Rezolver.</p>
<p>These <code>Resolve</code> extension methods create the <code>IResolveContext</code> for a given operation on your behalf, so you never
have to worry about it.</p>
</div>
<p>Assuming the container can locate the service registration for the type you request, it will fetch/produce an
instance of the associated object type according to the behaviour described by the <a class="xref" href="../api/Rezolver.ITarget.html">ITarget</a> which we 
previously registered.</p>
<p>If no registration is found, then an <code>InvalidOperationException</code> is raised by the container.</p>
<div class="TIP"><h5>Tip</h5><p><a class="xref" href="../api/Rezolver.IContainer.html">IContainer</a> also implements the <code>System.IServiceProvider</code> interface from the .Net framework, which requires
that missing services yield a <code>null</code> result instead of throwing an exception.</p>
</div>
<h3 id="canresolvetryresolve">CanResolve/TryResolve</h3>
<p>Sometimes you might want to <em>attempt</em> to resolve an object from the container, but not have an exception raised
if it cannot be found.  In this case you can use the <a class="xref" href="../api/Rezolver.IContainer.html#Rezolver_IContainer_TryResolve_">TryResolve</a> method, which returns the
object via an <code>out</code> parameter and returns a <code>bool</code> indicating whether the operation succeeds.</p>
<p>Naturally, as with the <code>Resolve</code> operation, this method has a generic overload
(<a class="xref" href="../api/Rezolver.ContainerResolveExtensions.html#Rezolver_ContainerResolveExtensions_TryResolve__1_Rezolver_IContainer___0__">TryResolve&lt;TObject&gt;(IContainer, out TObject)</a>) to avoid the need for a 
temporary <code>Object</code> reference:</p>
<pre><code class="lang-cs">MyService result;
bool success = container.TryResolve(out result);
//success == true or false depending on registrations.
</code></pre><p>Similarly we can also introspect a container to find out if it <em>can</em> resolve an instance of a given type
by using the <a class="xref" href="../api/Rezolver.IContainer.html#Rezolver_IContainer_CanResolve_">CanResolve</a> method.  This method also has friendly overloads via extension
methods (e.g. <a class="xref" href="../api/Rezolver.ContainerResolveExtensions.html#Rezolver_ContainerResolveExtensions_CanResolve__1_Rezolver_IContainer_">CanResolve&lt;TObject&gt;(IContainer)</a>)):</p>
<pre><code class="lang-cs">bool canResolve = container.CanResolve&lt;MyService&gt;();
</code></pre><hr>
<h1 id="behaviours-advanced">Behaviours (Advanced)</h1>
<p>For those looking to customise or extend Rezolver, many of the types are overridable.  However, 
the <a class="xref" href="../api/Rezolver.ITargetContainer.html">ITargetContainer</a> and <a class="xref" href="../api/Rezolver.IContainer.html">IContainer</a> implementations mentioned above also use
another mechanism that provides extensibility without having to subclass them.</p>
<div class="NOTE"><h5>Note</h5><p>This is an advanced topic and not one that you should have to worry about most of the time.  The examples in
this guide will highlight where you can use the functionality described below.</p>
</div>
<p>There are two primary types of behaviour in Rezolver:</p>
<ol>
<li><strong>Target container behaviours</strong> (via implementations of <a class="xref" href="../api/Rezolver.ITargetContainerBehaviour.html">ITargetContainerBehaviour</a>)</li>
<li><strong>Container behaviours</strong> (via implementations of <a class="xref" href="../api/Rezolver.IContainerBehaviour.html">IContainerBehaviour</a>)</li>
</ol>
<p>Both are very similar in that they define a method called <code>Attach</code> to which is passed an 
<a class="xref" href="../api/Rezolver.ITargetContainer.html">ITargetContainer</a> and, in the case of <a class="xref" href="../api/Rezolver.IContainerBehaviour.html">IContainerBehaviour</a>, also an
<a class="xref" href="../api/Rezolver.IContainer.html">IContainer</a>.  Implementations of the interfaces can add/modify service 
registrations which are then used either directly by the container, or which provide more advanced registration
functionality.</p>
<p>For example, Rezolver&#39;s <a href="enumerables.html">automatic resolving of enumerables</a> is enabled by attaching the 
<a class="xref" href="../api/Rezolver.Behaviours.AutoEnumerableBehaviour.html">AutoEnumerableBehaviour</a> to an <a class="xref" href="../api/Rezolver.ITargetContainer.html">ITargetContainer</a> (it is, therefore an 
<a class="xref" href="../api/Rezolver.ITargetContainerBehaviour.html">ITargetContainerBehaviour</a>).</p>
<p>Equally, Rezolver&#39;s support for <a href="constructor-injection/member-injection.html">member injection</a> can be
controlled container-wide by attaching a @Rezolver.Behaviours.DefaultMemberBinding to the container when it
is created.</p>
<div class="TIP"><h5>Tip</h5><p>At the moment, the functionality that&#39;s controlled by these behaviours is limited, but it will increase
over time as new features are added and as other functionality is reimplemented to take advantage of them.</p>
</div>
<p>The various types of target container and container have constructors which accept optional behaviours, as 
shown in the following lists:</p>
<p><em>Target Container Behaviours</em></p>
<ul>
<li><a class="xref" href="../api/Rezolver.TargetContainer.html#Rezolver_TargetContainer__ctor_Rezolver_ITargetContainerBehaviour_">TargetContainer(ITargetContainerBehaviour)</a></li>
<li><a class="xref" href="../api/Rezolver.OverridingTargetContainer.html#Rezolver_OverridingTargetContainer__ctor_Rezolver_ITargetContainer_Rezolver_ITargetContainerBehaviour_">OverridingTargetContainer(ITargetContainer, ITargetContainerBehaviour)</a></li>
</ul>
<p><em>Container Behaviours</em></p>
<ul>
<li><a class="xref" href="../api/Rezolver.Container.html#Rezolver_Container__ctor_Rezolver_ITargetContainer_Rezolver_IContainerBehaviour_">Container(ITargetContainer, IContainerBehaviour)</a></li>
<li><a class="xref" href="../api/Rezolver.ScopedContainer.html#Rezolver_ScopedContainer__ctor_Rezolver_ITargetContainer_Rezolver_IContainerBehaviour_">ScopedContainer(ITargetContainer, IContainerBehaviour)</a></li>
<li><a class="xref" href="../api/Rezolver.OverridingContainer.html#Rezolver_OverridingContainer__ctor_Rezolver_IContainer_Rezolver_ITargetContainer_Rezolver_IContainerBehaviour_">OverridingContainer(IContainer, ITargetContainer, IContainerBehaviour)</a></li>
</ul>
<p>If you look at these constructors, you&#39;ll notice that in all cases the behaviour parameters are optional - 
this is because Rezolver has <em>default</em> behaviours that it uses for these types if no specific behaviour is
passed on construction, and these can all be found in the <a class="xref" href="../api/Rezolver.GlobalBehaviours.html">GlobalBehaviours</a> class.</p>
<p>Briefly, these are all instances of special behaviour classes which are collections of other behaviours:</p>
<ul>
<li><strong><a class="xref" href="../api/Rezolver.GlobalBehaviours.html#Rezolver_GlobalBehaviours_TargetContainerBehaviour">TargetContainerBehaviour</a></strong> - A <a class="xref" href="../api/Rezolver.TargetContainerBehaviourCollection.html">TargetContainerBehaviourCollection</a> with zero
or more <a class="xref" href="../api/Rezolver.ITargetContainerBehaviour.html">ITargetContainerBehaviour</a> objects which will be attached to all <a class="xref" href="../api/Rezolver.TargetContainer.html">TargetContainer</a>
and <a class="xref" href="../api/Rezolver.OverridingTargetContainer.html">OverridingTargetContainer</a> objects by default</li>
<li><strong><a class="xref" href="../api/Rezolver.GlobalBehaviours.html#Rezolver_GlobalBehaviours_ContainerBehaviour">ContainerBehaviour</a></strong> - A <a class="xref" href="../api/Rezolver.ContainerBehaviourCollection.html">ContainerBehaviourCollection</a> with zero or more
<a class="xref" href="../api/Rezolver.IContainerBehaviour.html">IContainerBehaviour</a> objects which will be attached to all <a class="xref" href="../api/Rezolver.Container.html">Container</a> objects by default 
(including derived types; except <a class="xref" href="../api/Rezolver.OverridingTargetContainer.html">OverridingTargetContainer</a>, which gets its own global behaviour)</li>
<li><strong><a class="xref" href="../api/Rezolver.GlobalBehaviours.html#Rezolver_GlobalBehaviours_OverridingContainerBehaviour">OverridingContainerBehaviour</a></strong> - Same as above, but this is specifically for
<a class="xref" href="../api/Rezolver.OverridingContainer.html">OverridingContainer</a>, because some of its behaviours are typically inherited from the container that
it is overriding.</li>
</ul>
<p>These collections can be modified (add/remove/replace/clear) at any stage of the application&#39;s lifetime, and they 
will take effect the next time a new container or target container is created.</p>
<p>There is much more to be covered about behaviours in the future.  For now - use them where this guide shows you can,
and if you think you need to use them for something you want to achieve then open an issue on Github.</p>
<hr>
<h1 id="next-steps">Next Steps</h1>
<ul>
<li>Read up on how to <a href="service-registration.html">register services in the container</a>.</li>
<li>Alternatively, if you haven&#39;t already, take a look Rezolver&#39;s understanding of <a href="lifetimes/index.html">object lifetimes</a>.</li>
</ul>

            </article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/ZolutionSoftware/Rezolver/blob/dev/doc/Rezolver.Documentation/_docfx_proj/docs/create-and-use-a-container.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span>Copyright &copy;2014 onwards <a href="http://www.zolution.co.uk" target="_blank">Zolution Software Ltd</a><br>Generated by <a href="https://dotnet.github.io/docfx/" target="_blank">DocFX</a>, with the Rezolver theme</span>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
